<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1542339660418" ID="ID_200195442" MODIFIED="1542342099019" TEXT="B&#xe0;i 2 - File trong Linux">
<node CREATED="1542342100637" ID="ID_327716636" MODIFIED="1542342105656" POSITION="left" TEXT="Ph&#xe2;n lo&#x1ea1;i t&#x1ec7;p tin">
<node CREATED="1542342110164" ID="ID_1271160575" MODIFIED="1542342126737" TEXT="Cat th&#x1eed; file binary cho m&#x1ecd;i ng&#x1b0;&#x1edd;i xem"/>
<node CREATED="1542342161237" ID="ID_683927896" MODIFIED="1542342173665" TEXT="Cat th&#x1eed; directory cho m&#x1ecd;i ng&#x1b0;&#x1edd;i xem"/>
<node CREATED="1542342202756" ID="ID_650396736" MODIFIED="1542342227473" TEXT="&#x110;&#xed;nh ch&#xed;nh l&#x1ea1;i STDOUT l&#xe0; ra m&#xe0;n h&#xec;nh"/>
</node>
<node CREATED="1542342344029" ID="ID_1511015604" MODIFIED="1542342353153" POSITION="left" TEXT="File descriptor">
<node CREATED="1542342355107" ID="ID_158585212" MODIFIED="1542342363433" TEXT="V&#x1ebd; l&#x1ea1;i cho m&#x1ecd;i ng&#x1b0;&#x1edd;i nh&#xec;n v&#x1ec1; file table"/>
<node CREATED="1542342366084" ID="ID_84594888" MODIFIED="1542342389377" TEXT="Gi&#x1ea3;i th&#xed;ch v&#x1ec1; file descriptor &#x1edf; t&#x1ea7;ng user-mode v&#xe0; kernel mode"/>
<node CREATED="1542342455229" ID="ID_1879319464" MODIFIED="1542342466801" TEXT="Gi&#x1ea3;i th&#xed;ch v&#x1ec1; to&#xe1;n t&#x1eed; &gt; trong command line"/>
<node CREATED="1542342579876" ID="ID_612984704" MODIFIED="1542342606617" TEXT="Code th&#x1eed; 1 ch&#x1b0;&#x1a1;ng tr&#xec;nh hi&#x1ec3;n th&#x1ecb; danh s&#xe1;ch file trong 1 folder. &#x110;&#x1b0;&#x1edd;ng d&#x1eab;n folder &#x111;&#x1b0;&#x1ee3;c fixed trong source code"/>
</node>
<node CREATED="1542351736147" ID="ID_339261372" MODIFIED="1542351747119" POSITION="left" TEXT="C&#xe1;ch s&#x1eed; d&#x1ee5;ng c&#xe1;c h&#xe0;m c&#x1a1; b&#x1ea3;n t&#x1b0;&#x1a1;ng t&#xe1;c v&#x1edb;i file">
<node CREATED="1542351748138" ID="ID_517377426" MODIFIED="1542351762031" TEXT="Ch&#x1ec9; gi&#x1edb;i thi&#x1ec7;u 1 s&#x1ed1; h&#xe0;m c&#x1a1; b&#x1ea3;n"/>
<node CREATED="1542342788124" ID="ID_528516060" MODIFIED="1542348870146" TEXT="B&#xe0;i t&#x1ead;p">
<node CREATED="1542342914636" ID="ID_1783490" MODIFIED="1542349223788" TEXT="T&#x1ef1; t&#x1ea1;o 1 file text v&#xe0; &#x111;&#x1ecd;c n&#xf3; t&#x1eeb; 1 v&#x1ecb; tr&#xed; b&#x1ea5;t k&#x1ef3;, t&#x1ea5;t c&#x1ea3; &#x111;&#x1ec1;u s&#x1eed; d&#x1ee5;ng C."/>
<node CREATED="1542342916628" ID="ID_1421020530" MODIFIED="1542343025873" TEXT="S&#x1eed; d&#x1ee5;ng h&#xe0;m readdir &#x111;&#x1ec3; in ra th&#xf4;ng tin c&#xe1;c file trong 1 folder v&#x1edb;i &#x111;&#x1b0;&#x1edd;ng d&#x1eab;n fixed trong source code. Th&#xf4;ng tin g&#x1ed3;m c&#xf3; t&#xea;n, size, modify time."/>
<node CREATED="1542348874007" ID="ID_1295278281" MODIFIED="1542348911827" TEXT="Build 1 kernel module c&#xf3; s&#x1eb5;n h&#xe0;m read/write sau &#x111;&#xf3; vi&#x1ebf;t 1 ch&#x1b0;&#x1a1;ng tr&#xec;nh C &#x111;&#x1ec3; &#x111;&#x1ecd;c file v&#xe0; xem k&#x1ebf;t qu&#x1ea3;"/>
<node CREATED="1542349336302" ID="ID_165302034" MODIFIED="1542351796055" TEXT="D&#xf9;ng C &#x111;&#x1ec3; t&#x1ea1;o ra 1 folder c&#xf3; c&#x1ea5;u tr&#xfa;c nh&#x1b0; h&#xec;nh v&#x1ebd;, trong &#x111;&#xf3; c&#xe1;c file c&#xf3; c&#xe1;c mode kh&#xe1;c nhau. Hi&#x1ec7;n th&#x1ecb; nh&#x1eef;ng file c&#xf3; mode l&#xe0; read only."/>
<node CREATED="1542349470694" ID="ID_309467512" MODIFIED="1542349537475" TEXT="T&#x1ea3;i 1 g&#xf3;i software packet v&#x1ec1; m&#xe1;y, sau &#x111;&#xf3; vi&#x1ebf;t ch&#x1b0;&#x1a1;ng tr&#xec;nh setup &#x111;&#x1ec3; c&#xe0;i &#x111;&#x1eb7;t packet &#x111;&#xf3; l&#xea;n m&#xe1;y t&#xed;nh, vi&#x1ebf;t 1 ch&#x1b0;&#x1a1;ng tr&#xec;nh uninstall &#x111;&#x1ec3; g&#x1ee1; g&#xf3;i packet &#x111;&#xf3; &#x111;i.">
<node CREATED="1542351715396" ID="ID_1340204117" MODIFIED="1542351717090" TEXT="https://drive.google.com/open?id=121QwiGUTnRdk18NoEoSDUAODxmDu5B9t"/>
</node>
</node>
</node>
<node CREATED="1558594320927" ID="ID_53461112" MODIFIED="1558594324668" POSITION="right" TEXT="Content">
<node CREATED="1558847174087" ID="ID_1822761671" MODIFIED="1558847176689" TEXT="Agenda">
<node CREATED="1558847201345" ID="ID_18694492" MODIFIED="1558847207976" TEXT="Ph&#xe2;n lo&#x1ea1;i t&#x1ec7;p tin"/>
<node CREATED="1558847208650" ID="ID_1559738869" MODIFIED="1558847213140" TEXT="B&#x1ea3;n ch&#x1ea5;t c&#x1ee7;a file"/>
<node CREATED="1558847213565" ID="ID_1988675262" MODIFIED="1558847221704" TEXT="C&#xe1;c h&#xe0;m t&#x1b0;&#x1a1;ng t&#xe1;c v&#x1edb;i file"/>
</node>
<node CREATED="1558596860915" ID="ID_1092835147" MODIFIED="1558682524292" TEXT="Gi&#x1edb;i thi&#x1ec7;u">
<node CREATED="1558597378051" ID="ID_1301833015" MODIFIED="1558597411280" TEXT="L&#xe0; instance c&#x1ee7;a m&#x1ed9;t &#x111;&#x1ed1;i t&#x1b0;&#x1ee3;ng n&#xe0;o &#x111;&#xf3;. V&#xed; d&#x1ee5; process, device, data."/>
<node CREATED="1558681853288" ID="ID_1636347390" MODIFIED="1558681861677" TEXT="Linux qu&#x1ea3;n l&#xfd; m&#x1ecd;i th&#x1ee9; th&#xf4;ng qua file"/>
<node CREATED="1558597428123" ID="ID_834589614" MODIFIED="1558597484183" TEXT="struct file include/linux/fs.h"/>
<node CREATED="1558681863720" ID="ID_75745519" MODIFIED="1558681926486" TEXT="Th&#x1eed; &#x111;&#x1ebf;m s&#x1ed1; process &#x111;ang c&#xf3; tr&#x1ea1;ng th&#xe1;i sleep trong h&#x1ec7; th&#x1ed1;ng th&#xf4;ng qua /proc folder"/>
</node>
<node CREATED="1542340309885" ID="ID_689242114" MODIFIED="1542340314863" TEXT="Ph&#xe2;n lo&#x1ea1;i t&#x1ec7;p tin">
<node CREATED="1542340316283" ID="ID_1416324015" MODIFIED="1542340326304" TEXT="Regular file">
<node CREATED="1542340350677" ID="ID_841176051" MODIFIED="1542340372665" TEXT="L&#xe0; c&#xe1;i file ch&#x1ee9;a d&#x1eef; li&#x1ec7;u v&#xe0; t&#x1ed3;n t&#x1ea1;i th&#x1ef1;c t&#x1ebf; trong &#x1ed5; c&#x1ee9;ng"/>
<node CREATED="1542340377189" ID="ID_1588341730" MODIFIED="1542340391279" TEXT="Kh&#xf4;ng b&#x1ecb; m&#x1ea5;t &#x111;i khi kh&#x1edf;i &#x111;&#x1ed9;ng l&#x1ea1;i h&#x1ec7; th&#x1ed1;ng"/>
<node CREATED="1542341245526" ID="ID_999579786" MODIFIED="1542341272673" TEXT="M&#x1ed7;i lo&#x1ea1;i file s&#x1ebd; c&#xf3; format d&#x1eef; li&#x1ec7;u ri&#xea;ng"/>
</node>
<node CREATED="1542341296765" ID="ID_503948585" MODIFIED="1542341303377" TEXT="Directory">
<node CREATED="1542341306332" ID="ID_1312068635" MODIFIED="1542341320633" TEXT="L&#xe0; file n&#x1eb1;m tr&#xea;n &#x1ed5; c&#x1ee9;ng."/>
<node CREATED="1542341321293" ID="ID_703627908" MODIFIED="1542341354370" TEXT="D&#x1eef; li&#x1ec7;u trong th&#x1b0; m&#x1ee5;c l&#xe0; t&#xea;n l&#xe0; m&#x1ed9;t s&#x1ed1; th&#xf4;ng tin c&#x1ee7;a c&#xe1;c file n&#x1eb1;m trong n&#xf3;."/>
</node>
<node CREATED="1542341389013" ID="ID_1000874897" MODIFIED="1542341394257" TEXT="C&#xe1;c lo&#x1ea1;i file kh&#xe1;c">
<node CREATED="1542341395364" ID="ID_1113689843" MODIFIED="1542341400617" TEXT="Meta data"/>
<node CREATED="1542341400989" ID="ID_1743889245" MODIFIED="1542341409025" TEXT="Symbolic link"/>
<node CREATED="1542341409517" ID="ID_929614635" MODIFIED="1542341413273" TEXT="virtual file">
<node CREATED="1542341546901" ID="ID_1354485657" MODIFIED="1542341556065" TEXT="Socket">
<node CREATED="1558683153440" ID="ID_1461659145" MODIFIED="1558683153813" TEXT="&#x110;&#x1b0;&#x1ee3;c l&#x1b0;u trong /proc/net/tcp"/>
</node>
<node CREATED="1542341556572" ID="ID_80532818" MODIFIED="1542341559249" TEXT="Device file">
<node CREATED="1558683158568" ID="ID_684584530" MODIFIED="1558683158837" TEXT="&#x110;&#x1b0;&#x1ee3;c l&#x1b0;u trong /dev "/>
</node>
<node CREATED="1542341559924" ID="ID_451767776" MODIFIED="1542341635145" TEXT="STDIN, STDOUT, STDERR"/>
<node CREATED="1558682908912" ID="ID_222512344" MODIFIED="1558683045829" TEXT="C&#xe1;c virtual file kh&#xf4;ng &#x111;&#x1b0;&#x1ee3;c l&#x1b0;u tr&#xea;n &#x1ed5; c&#x1ee9;ng m&#xe0; s&#x1ebd; &#x111;&#x1b0;&#x1ee3;c OS kh&#x1edf;i t&#x1ea1;o v&#xe0; n&#x1eb1;m trong RAM. Khi t&#x1eaf;t m&#xe1;y ch&#xfa;ng s&#x1ebd; bi&#x1ebf;n m&#x1ea5;t v&#xe0; &#x111;&#x1b0;&#x1ee3;c t&#x1ea1;o l&#x1ea1;i khi OS kh&#x1edf;i &#x111;&#x1ed9;ng."/>
</node>
</node>
</node>
<node CREATED="1558597513611" ID="ID_461765933" MODIFIED="1558684501340" TEXT="Qu&#xe1; tr&#xec;nh kh&#x1edf;i t&#x1ea1;o file system">
<node CREATED="1558597540795" ID="ID_1467192441" MODIFIED="1558597568408" TEXT="Kh&#x1edf;i t&#x1ea1;o c&#xe1;c file data t&#x1eeb; &#x1ed5; c&#x1ee9;ng"/>
<node CREATED="1558597569810" ID="ID_842721889" MODIFIED="1558597582552" TEXT="Kh&#x1edf;i t&#x1ea1;o /proc/pid t&#x1eeb; c&#xe1;c process"/>
<node CREATED="1558597583363" ID="ID_1157191165" MODIFIED="1558597601143" TEXT="Kh&#x1edf;i t&#x1ea1;o /dev/ t&#x1eeb; device"/>
</node>
<node CREATED="1558600134811" ID="ID_1844537653" MODIFIED="1558600152415" TEXT="V&#xed; d&#x1ee5; v&#x1ec1; file fd sau khi open file">
<node CREATED="1558681076369" ID="ID_252989310" MODIFIED="1558681092685" TEXT="2 file fd gi&#x1ed1;ng nhau &#x1edf; 2 process c&#xf3; tr&#x1ecf; v&#xe0;o c&#xf9;ng 1 file?"/>
</node>
<node CREATED="1558597805587" ID="ID_1830081147" MODIFIED="1558597812543" TEXT="File table c&#x1ee7;a process">
<node CREATED="1558684898320" ID="ID_189575705" MODIFIED="1558684936733" TEXT="C&#xf3; bao gi&#x1edf; b&#x1ea1;n t&#x1ef1; h&#x1ecf;i, gi&#xe1; tr&#x1ecb; tr&#x1ea3; v&#x1ec1; c&#x1ee7;a h&#xe0;m open th&#x1ef1;c ch&#x1ea5;t l&#xe0; g&#xec;?"/>
<node CREATED="1558598596146" ID="ID_699134475" MODIFIED="1558598621406" TEXT="V&#x1ebd; b&#x1ea3;ng file table cho m&#x1ecd;i ng&#x1b0;&#x1edd;i xem"/>
<node CREATED="1558598622107" ID="ID_905855967" MODIFIED="1558598676894" TEXT="source code: task_struct-&gt;files-&gt;fdtable"/>
<node CREATED="1558598727947" ID="ID_1339029487" MODIFIED="1558598861784" TEXT="B&#x1ea3;n ch&#x1ea5;t c&#x1ee7;a file fd">
<node CREATED="1558598745699" ID="ID_1706279871" MODIFIED="1558685067957" TEXT="L&#xe0; s&#x1ed1; nguy&#xea;n d&#x1b0;&#x1a1;ng &#x111;&#x1ea1;i di&#x1ec7;n cho index c&#x1ee7;a file pointer trong b&#x1ea3;ng file table c&#x1ee7;a process"/>
<node CREATED="1558598809170" ID="ID_1538973986" MODIFIED="1558598845822" TEXT="STDIN, STDOUT v&#xe0; STDERR ch&#xed;nh l&#xe0; 3 file fd &#x111;&#x1b0;&#x1ee3;c t&#x1ea1;o ra khi process start. Ch&#xfa;ng chi&#x1ebf;m 3 v&#x1ecb; tr&#xed; &#x111;&#x1ea7;u ti&#xea;n trong b&#x1ea3;ng file table."/>
<node CREATED="1558667992168" ID="ID_586732124" MODIFIED="1558667992902" TEXT="To&#xe1;n t&#x1eed; &quot;&gt;&quot;?">
<node CREATED="1558685089640" ID="ID_1885471074" MODIFIED="1558685115982" TEXT="T&#xe1;c d&#x1ee5;ng thay &#x111;&#x1ed5;i c&#xe1;c file STDIN, STDOUT, STDERR c&#x1ee7;a process khi n&#xf3; &#x111;&#x1b0;&#x1ee3;c t&#x1ea1;o ra"/>
</node>
</node>
</node>
<node CREATED="1558598927338" ID="ID_1162696487" MODIFIED="1558685364494" TEXT="File descriptor">
<node CREATED="1558600023683" ID="ID_1471493933" MODIFIED="1558850178630" TEXT="include/linux/fs.h: struct file"/>
<node CREATED="1558600036947" ID="ID_1923320343" MODIFIED="1558600073751" TEXT="L&#xe0; struct ch&#x1ee9;a th&#xf4;ng tin v&#x1ec1; file v&#xe0; c&#xe1;c con tr&#x1ecf; tr&#x1ecf; &#x111;&#x1ebf;n c&#xe1;c operation c&#x1ee7;a file nh&#x1b0; read/write."/>
</node>
<node CREATED="1558849453940" ID="ID_923498961" MODIFIED="1558849466162" TEXT="Block device">
<node CREATED="1558850411143" ID="ID_3219936" MODIFIED="1558850427888" TEXT="C&#xe1;c thi&#x1ebf;t b&#x1ecb; l&#x1b0;u tr&#x1eef; &#x111;a s&#x1ed1; thu&#x1ed9;c lo&#x1ea1;i block device"/>
<node CREATED="1558849501621" ID="ID_323810319" MODIFIED="1558850456010" TEXT="C&#xe1;c thi&#x1ebf;t b&#x1ecb; block device th&#x1b0;&#x1edd;ng quy &#x111;&#x1ecb;nh k&#xed;ch th&#x1b0;&#x1edb;c t&#x1ed1;i thi&#x1ec3;u cho m&#x1ed7;i l&#x1ea7;n &#x111;&#x1ecd;c.">
<node CREATED="1558849475557" ID="ID_1054175588" MODIFIED="1558849733054" TEXT="&#x110;a s&#x1ed1; c&#xe1;c thi&#x1ebf;t b&#x1ecb; l&#x1b0;u tr&#x1eef; &#x111;&#x1b0;&#x1ee3;c thi&#x1ebf;t k&#x1ebf; theo d&#x1ea1;ng block. M&#x1ed7;i l&#x1ea7;n &#x111;&#x1ecd;c th&#xf4;ng th&#x1b0;&#x1edd;ng s&#x1ebd; &#x111;&#x1ecd;c &#x111;&#x1b0;&#x1ee3;c &#xed;t nh&#x1ea5;t l&#xe0; 512 bytes. Nguy&#xea;n nh&#xe2;n l&#xe0; do gi&#x1edb;i h&#x1ea1;n c&#x1ee7;a ph&#x1ea7;n c&#x1ee9;ng, v&#xed; d&#x1ee5; &#x1ed5; c&#x1ee9;ng c&#x1ea7;n 1 kho&#x1ea3;ng th&#x1edd;i gian t&#x1ed1;i thi&#x1ec3;u &#x111;&#x1ec3; quay v&#xe0; d&#x1eeb;ng l&#x1ea1;i, do &#x111;&#xf3; n&#xf3; kh&#xf4;ng th&#x1ec3; &#x111;&#x1ecd;c ch&#x1ec9; 1 byte m&#xe0; th&#xf4;ng th&#x1b0;&#x1edd;ng s&#x1ebd; &#x111;&#x1ecd;c &#x111;&#x1b0;&#x1ee3;c t&#x1ed1;i thi&#x1ec3;u 512 bytes."/>
</node>
</node>
<node CREATED="1542342525628" ID="ID_383361184" MODIFIED="1542351741591" TEXT="C&#xe1;ch s&#x1eed; d&#x1ee5;ng c&#xe1;c h&#xe0;m c&#x1a1; b&#x1ea3;n t&#x1b0;&#x1a1;ng t&#xe1;c v&#x1edb;i file">
<node CREATED="1558668354464" ID="ID_1155066386" MODIFIED="1558668362270" TEXT="C&#xe1;c h&#xe0;m &#x111;&#x1ecd;c ghi d&#x1eef; li&#x1ec7;u trong file">
<node CREATED="1542342665644" ID="ID_1908429929" MODIFIED="1558685841297" TEXT="open">
<node CREATED="1558678657442" ID="ID_1223696061" MODIFIED="1558678669940" TEXT="int open(const char *pathname, int flags);">
<node CREATED="1558678677448" ID="ID_1497794239" MODIFIED="1558678677884" TEXT="#include &lt;sys/types.h&gt;"/>
<node CREATED="1558678685984" ID="ID_770192945" MODIFIED="1558678686493" TEXT="#include &lt;sys/stat.h&gt;"/>
<node CREATED="1558678693736" ID="ID_1174478221" MODIFIED="1558678694749" TEXT="#include &lt;fcntl.h&gt;"/>
</node>
</node>
<node CREATED="1542342737156" ID="ID_1533667166" MODIFIED="1542342743917" TEXT="read">
<node CREATED="1558678996521" ID="ID_1505388588" MODIFIED="1558678996989" TEXT="ssize_t read(int fd, void *buf, size_t count);">
<node CREATED="1558679003208" ID="ID_655056087" MODIFIED="1558679003621" TEXT="#include &lt;unistd.h&gt;"/>
</node>
</node>
<node CREATED="1542342750628" ID="ID_1975842351" MODIFIED="1542342755985" TEXT="write">
<node CREATED="1558679019432" ID="ID_1913675819" MODIFIED="1558679020174" TEXT=" ssize_t write(int fd, const void *buf, size_t count);"/>
</node>
<node CREATED="1542342699980" ID="ID_269515073" MODIFIED="1542342702977" TEXT="lseek">
<node CREATED="1558679063617" ID="ID_224520456" MODIFIED="1558679064149" TEXT="off_t lseek(int fd, off_t offset, int whence);"/>
</node>
<node CREATED="1542349270159" ID="ID_1823913325" MODIFIED="1542349275339" TEXT="sync">
<node CREATED="1558679084937" ID="ID_610246088" MODIFIED="1558679085309" TEXT="void sync(void);"/>
<node CREATED="1558679085640" ID="ID_76855590" MODIFIED="1558679202238" TEXT="Flush t&#x1ea5;t c&#x1ea3; cached data c&#x1ee7;a t&#x1ea5;t c&#x1ea3; c&#xe1;c file &#x111;ang m&#x1edf; trong h&#x1ec7; th&#x1ed1;ng xu&#x1ed1;ng &#x1ed5; c&#x1ee9;ng. C&#xf3; th&#x1ec3; s&#x1ebd; r&#x1ea5;t ch&#x1ead;m do ph&#x1ea3;i sync data cho c&#x1ea3; ch&#x1b0;&#x1a1;ng tr&#xec;nh kh&#xe1;c."/>
<node CREATED="1558679170488" ID="ID_437035559" MODIFIED="1558679171829" TEXT="int syncfs(int fd);">
<node CREATED="1558679172816" ID="ID_173779593" MODIFIED="1558679178293" TEXT="Ch&#x1ec9; sync cho ri&#xea;ng 1 file"/>
</node>
</node>
<node CREATED="1542342691220" ID="ID_1318701005" MODIFIED="1558686047773" TEXT="close">
<node CREATED="1558679277056" ID="ID_144694981" MODIFIED="1558679286741" TEXT="Free file pointer"/>
<node CREATED="1558679239057" ID="ID_753180739" MODIFIED="1558679247589" TEXT="S&#x1ebd; sync data tr&#x1b0;&#x1edb;c khi close"/>
<node CREATED="1558679292193" ID="ID_1464161780" MODIFIED="1558679325990" TEXT="X&#xf3;a h&#xe0;ng ch&#x1ee9;a file fd &#x111;&#xf3; trong file table c&#x1ee7;a process"/>
<node CREATED="1558679335992" ID="ID_1372869806" MODIFIED="1558679379909" TEXT="Khi process k&#x1ebf;t th&#xfa;c th&#xf4;ng qua g&#x1ecd;i h&#xe0;m exit() ho&#x1eb7;c return trong h&#xe0;m main th&#xec; OS s&#x1ebd; t&#x1ef1; &#x111;&#x1ed9;ng call close() cho t&#x1ea5;t c&#x1ea3; c&#xe1;c file c&#xf3; trong file table."/>
</node>
</node>
<node CREATED="1558849091633" ID="ID_48187980" MODIFIED="1558849105857" TEXT="Cached data c&#x1ee7;a file">
<node CREATED="1558849154600" ID="ID_954655884" MODIFIED="1558849197791" TEXT="H&#x1ec7; th&#x1ed1;ng s&#x1eed; d&#x1ee5;ng 1 ph&#x1ea7;n RAM l&#xe0;m b&#x1ed9; nh&#x1edb; cached cho vi&#x1ec7;c &#x111;&#x1ecd;c ghi file.">
<node CREATED="1558668525105" ID="ID_755911812" MODIFIED="1558668713862" TEXT="Vi&#x1ec7;c &#x111;&#x1ecd;c ghi d&#x1eef; li&#x1ec7;u trong file th&#xf4;ng th&#x1b0;&#x1edd;ng s&#x1ebd; &#x111;&#x1ecd;c qua cached &#x111;&#x1ec3; t&#x103;ng t&#x1ed1;c &#x111;&#x1ed9; c&#x1ee7;a h&#x1ec7; th&#x1ed1;ng. V&#xed; d&#x1ee5; nh&#x1b0; vi&#x1ec7;c &#x111;&#x1ecd;c 1 byte t&#x1eeb; &#x1ed5; c&#x1ee9;ng, khi &#x111;&#xf3; OS v&#x1eab;n &#x111;&#x1ecd;c c&#x1ea3; sector l&#xe0; 512 bytes, tuy nhi&#xea;n ch&#x1ec9; l&#x1ea5;y 1 bytes tr&#x1ea3; v&#x1ec1; cho app, s&#x1ed1; bytes c&#xf2;n l&#x1ea1;i &#x111;&#x1b0;&#x1ee3;c c&#x1ea5;t v&#xe0;o cached n&#x1eb1;m trong RAM, n&#x1ebf;u l&#x1ea7;n &#x111;&#x1ecd;c sau &#x111;&#x1ecd;c data n&#x1eb1;m trong sector &#x111;&#xf3; th&#xec; s&#x1ebd; l&#x1ea5;y t&#x1eeb; cached m&#xe0; kh&#xf4;ng c&#x1ea7;n &#x111;&#x1ecd;c xu&#x1ed1;ng &#x1ed5; c&#x1ee9;ng."/>
<node CREATED="1558669617897" ID="ID_319316720" MODIFIED="1558670218597" TEXT="Vi&#x1ec7;c ghi data th&#xf4;ng th&#x1b0;&#x1edd;ng OS s&#x1ebd; ghi v&#xe0;o cached n&#x1eb1;m trong RAM. Trong kernel c&#xf3; 1 thread s&#x1ebd; &#x111;&#x1ecb;nh k&#x1ef3; flush t&#x1ea5;t c&#x1ea3; c&#xe1;c cached v&#xe0; file. Ngo&#xe0;i ra c&#xf3; th&#x1ec3; s&#x1eed; d&#x1ee5;ng h&#xe0;m sync() ho&#x1eb7;c setting flag l&#xfa;c open file &#x111;&#x1ec3; ch&#x1ec9; &#x111;&#x1ecb;nh kh&#xf4;ng s&#x1eed; d&#x1ee5;ng cached.">
<node CREATED="1558670221736" ID="ID_1560146793" MODIFIED="1558670251444" TEXT="N&#x1ebf;u ch&#x1b0;&#x1a1;ng tr&#xec;nh b&#x1ecb; crash tr&#x1b0;&#x1edb;c khi close() file th&#xec; c&#xf3; th&#x1ec3; data ch&#x1b0;a &#x111;&#x1b0;&#x1ee3;c ghi xu&#x1ed1;ng &#x1ed5; c&#x1ee9;ng."/>
</node>
<node CREATED="1558849942514" ID="ID_290212678" MODIFIED="1558849956124" TEXT="wakeup_flusher_threads: kernel 4.14"/>
</node>
<node CREATED="1558849204907" ID="ID_1935267362" MODIFIED="1558849853934" TEXT="M&#x1ed7;i file khi open s&#x1ebd; t&#x1ea1;o ra 1 inode. M&#x1ed7;i inode s&#x1ebd; c&#xf3; tr&#x1ecf; &#x111;&#x1ebf;n v&#xf9;ng nh&#x1edb; cached ri&#xea;ng c&#x1ee7;a n&#xf3;.">
<node CREATED="1558851158840" ID="ID_1731991240" MODIFIED="1558851160598" TEXT="Source code: struct inode -&gt; mapping "/>
</node>
<node CREATED="1558849863502" ID="ID_1052205127" MODIFIED="1558849892268" TEXT="B&#x1ed9; nh&#x1edb; cached c&#x1ee7;a 1 file c&#xf3; th&#x1ec3; &#x111;&#x1b0;&#x1ee3;c flush theo c&#xe1;ch ch&#x1ee7; &#x111;&#x1ed9;ng ho&#x1eb7;c b&#x1ecb; &#x111;&#x1ed9;ng">
<node CREATED="1558849981432" ID="ID_1009827721" MODIFIED="1558850048702" TEXT="Ch&#x1ee7; &#x111;&#x1ed9;ng flush cached: g&#x1ecd;i h&#xe0;m fflush, sync(), fsync() ho&#x1eb7;c close() file"/>
<node CREATED="1558850049252" ID="ID_1600699245" MODIFIED="1558850086755" TEXT="B&#x1ecb; &#x111;&#x1ed9;ng flush cached: Process k&#x1ebf;t th&#xfa;c b&#x1eb1;ng h&#xe0;m exit ho&#x1eb7;c c&#xe2;u l&#x1ec7;nh return ho&#x1eb7;c &#x111;&#x1b0;&#x1ee3;c kernel thread flush cached."/>
</node>
</node>
<node CREATED="1558852968186" ID="ID_1268825229" MODIFIED="1558853007364" TEXT="Asynchronous File I/O">
<node CREATED="1558853010880" ID="ID_512026499" MODIFIED="1558853040428" TEXT="C&#xe1;c h&#xe0;m read/write &#x111;&#x1ec1;u g&#xe2;y block ch&#x1b0;&#x1a1;ng tr&#xec;nh cho &#x111;&#x1ebf;n khi &#x111;&#x1ecd;c xong."/>
<node CREATED="1558853530453" ID="ID_685372102" MODIFIED="1558853546573" TEXT="K&#x1ef9; thu&#x1ead;t kh&#x1eaf;c ph&#x1ee5;c">
<node CREATED="1558853557378" ID="ID_122624030" MODIFIED="1558853573821" TEXT="S&#x1eed; d&#x1ee5;ng asynchronous read/write">
<node CREATED="1558853880874" ID="ID_1028422037" MODIFIED="1558854050691" TEXT="C&#xe1;c h&#xe0;m asynchronous s&#x1ebd; t&#x1ea1;o ra 1 request &#x111;&#x1ecd;c/ghi xu&#x1ed1;ng driver. Sau &#x111;&#xf3; ch&#x1b0;&#x1a1;ng tr&#xec;nh g&#x1ecd;i n&#xf3; s&#x1ebd; kh&#xf4;ng b&#x1ecb; block m&#xe0; ch&#x1ea1;y ti&#x1ebf;p &#x111;&#x1b0;&#x1ee3;c c&#xe2;u l&#x1ec7;nh b&#xea;n d&#x1b0;&#x1edb;i. Driver s&#x1ebd; t&#x1ef1; &#x111;&#x1ecd;c data t&#x1eeb; &#x1ed5; c&#x1ee9;ng, &#x111;&#x1ebf;n khi &#x111;&#x1ecd;c &#x111;&#x1ee7; s&#x1ed1; byte th&#xec; n&#xf3; s&#x1ebd; update status v&#xe0;o bi&#x1ebf;n aio_error cho application bi&#x1ebf;t."/>
</node>
<node CREATED="1558853574531" ID="ID_1790946736" MODIFIED="1558853585449" TEXT="T&#x1ea1;o 1 thread m&#x1edb;i &#x111;&#x1ec3; &#x111;&#x1ecd;c/ghi"/>
</node>
</node>
<node CREATED="1558853631775" ID="ID_1594576817" MODIFIED="1558853638129" TEXT="Asynchronous File I/O">
<node CREATED="1558853828534" ID="ID_550313091" MODIFIED="1558853833404" TEXT="Demo source code"/>
</node>
<node CREATED="1558679562105" ID="ID_550147186" MODIFIED="1558679570550" TEXT="C&#xe1;c h&#xe0;m &#x111;&#x1ecd;c ghi thu&#x1ed9;c t&#xed;nh c&#x1ee7;a file">
<node CREATED="1558679677521" ID="ID_699168177" MODIFIED="1558679678453" TEXT="int stat(const char *restrict pathname, struct stat *restrict buf );">
<node CREATED="1558679729712" ID="ID_845260948" MODIFIED="1558679730101" TEXT="#include &lt;sys/stat.h&gt;"/>
<node CREATED="1558679730729" ID="ID_1289914307" MODIFIED="1558679735797" TEXT="struct stat"/>
<node CREATED="1558679738976" ID="ID_815140370" MODIFIED="1558679742261" TEXT="example code"/>
</node>
<node CREATED="1558680049826" ID="ID_703759468" MODIFIED="1558680050821" TEXT="int chmod(const char *pathname, mode_t mode);"/>
<node CREATED="1558680068976" ID="ID_651000783" MODIFIED="1558680069469" TEXT="int chown(const char *pathname, uid_t owner, gid_t group);"/>
<node CREATED="1558680431017" ID="ID_7138896" MODIFIED="1558680431485" TEXT="int link(const char *existingpath, const char *newpath);">
<node CREATED="1558680432480" ID="ID_1750568507" MODIFIED="1558680483406" TEXT="T&#x1ea1;o ra hard link m&#x1edb;i cho file"/>
<node CREATED="1558680492896" ID="ID_142438059" MODIFIED="1558680522653" TEXT="1 file n&#x1eb1;m tr&#xea;n &#x1ed5; c&#x1ee9;ng c&#xf3; th&#x1ec3; c&#xf3; nhi&#x1ec1;u hardlink. Khi t&#x1ea5;t c&#x1ea3; c&#xe1;c hardlink c&#xf9;ng b&#x1ecb; x&#xf3;a th&#xec; file m&#x1edb;i b&#x1ecb; x&#xf3;a."/>
</node>
</node>
<node CREATED="1558680555936" ID="ID_1194994490" MODIFIED="1558680561525" TEXT="C&#xe1;c h&#xe0;m thao t&#xe1;c v&#x1edb;i th&#x1b0; m&#x1ee5;c">
<node CREATED="1558680582233" ID="ID_1487178957" MODIFIED="1558680582669" TEXT="#include &lt;dirent.h&gt;"/>
<node CREATED="1558680562168" ID="ID_201943778" MODIFIED="1558680563277" TEXT="int mkdir(const char *pathname, mode_t mode)"/>
<node CREATED="1558680593304" ID="ID_702300989" MODIFIED="1558680593717" TEXT="DIR *opendir(const char *pathname);"/>
<node CREATED="1558680628488" ID="ID_1421732276" MODIFIED="1558680629140" TEXT="struct dirent *readdir(DIR *dp);"/>
<node CREATED="1558680637560" ID="ID_931967054" MODIFIED="1558680637926" TEXT="int closedir(DIR *dp);"/>
<node CREATED="1558680639856" ID="ID_1953975403" MODIFIED="1558680642925" TEXT="example code"/>
</node>
</node>
<node CREATED="1542342788124" ID="ID_353143647" MODIFIED="1542348870146" TEXT="B&#xe0;i t&#x1ead;p">
<node CREATED="1542342914636" ID="ID_1052052463" MODIFIED="1542349223788" TEXT="T&#x1ef1; t&#x1ea1;o 1 file text v&#xe0; &#x111;&#x1ecd;c n&#xf3; t&#x1eeb; 1 v&#x1ecb; tr&#xed; b&#x1ea5;t k&#x1ef3;, t&#x1ea5;t c&#x1ea3; &#x111;&#x1ec1;u s&#x1eed; d&#x1ee5;ng C."/>
<node CREATED="1542342916628" ID="ID_255618941" MODIFIED="1542343025873" TEXT="S&#x1eed; d&#x1ee5;ng h&#xe0;m readdir &#x111;&#x1ec3; in ra th&#xf4;ng tin c&#xe1;c file trong 1 folder v&#x1edb;i &#x111;&#x1b0;&#x1edd;ng d&#x1eab;n fixed trong source code. Th&#xf4;ng tin g&#x1ed3;m c&#xf3; t&#xea;n, size, modify time."/>
<node CREATED="1542348874007" ID="ID_311488613" MODIFIED="1542348911827" TEXT="Build 1 kernel module c&#xf3; s&#x1eb5;n h&#xe0;m read/write sau &#x111;&#xf3; vi&#x1ebf;t 1 ch&#x1b0;&#x1a1;ng tr&#xec;nh C &#x111;&#x1ec3; &#x111;&#x1ecd;c file v&#xe0; xem k&#x1ebf;t qu&#x1ea3;"/>
<node CREATED="1542349336302" ID="ID_418750528" MODIFIED="1542351796055" TEXT="D&#xf9;ng C &#x111;&#x1ec3; t&#x1ea1;o ra 1 folder c&#xf3; c&#x1ea5;u tr&#xfa;c nh&#x1b0; h&#xec;nh v&#x1ebd;, trong &#x111;&#xf3; c&#xe1;c file c&#xf3; c&#xe1;c mode kh&#xe1;c nhau. Hi&#x1ec7;n th&#x1ecb; nh&#x1eef;ng file c&#xf3; mode l&#xe0; read only."/>
<node CREATED="1542349470694" FOLDED="true" ID="ID_1086947759" MODIFIED="1558668256316" TEXT="T&#x1ea3;i 1 g&#xf3;i software packet v&#x1ec1; m&#xe1;y, sau &#x111;&#xf3; vi&#x1ebf;t ch&#x1b0;&#x1a1;ng tr&#xec;nh setup &#x111;&#x1ec3; c&#xe0;i &#x111;&#x1eb7;t packet &#x111;&#xf3; l&#xea;n m&#xe1;y t&#xed;nh, vi&#x1ebf;t 1 ch&#x1b0;&#x1a1;ng tr&#xec;nh uninstall &#x111;&#x1ec3; g&#x1ee1; g&#xf3;i packet &#x111;&#xf3; &#x111;i.">
<node CREATED="1542351715396" ID="ID_138711411" MODIFIED="1542351717090" TEXT="https://drive.google.com/open?id=121QwiGUTnRdk18NoEoSDUAODxmDu5B9t"/>
</node>
</node>
</node>
</node>
</map>
